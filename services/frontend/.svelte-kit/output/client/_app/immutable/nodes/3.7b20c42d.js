import{S as J,i as L,s as V,k as g,q as C,a as T,l as w,m as k,r as q,h as y,c as U,n as c,b as j,G as n,K as A,J as I,u as z,H as F,L as Q,I as R}from"../chunks/index.575d8db5.js";import{g as W}from"../chunks/navigation.cba65cff.js";import{w as X}from"../chunks/index.9a5a6444.js";import{p as G,a as Y,s as Z,b as $,w as x}from"../chunks/store.c3d4df30.js";function ee(l){let u,e,f,p,_,s,E,a,b,h,S,N,m,r,d,t,P,M,B;return{c(){u=g("main"),e=g("div"),f=g("h1"),p=C("Sign In"),_=T(),s=g("input"),E=T(),a=g("input"),b=T(),h=g("button"),S=C("Sign In"),N=T(),m=g("button"),r=C("Create Account"),d=T(),t=g("p"),P=C(l[2]),this.h()},l(o){u=w(o,"MAIN",{class:!0});var v=k(u);e=w(v,"DIV",{class:!0});var i=k(e);f=w(i,"H1",{});var H=k(f);p=q(H,"Sign In"),H.forEach(y),_=U(i),s=w(i,"INPUT",{type:!0,placeholder:!0,class:!0}),E=U(i),a=w(i,"INPUT",{type:!0,placeholder:!0,class:!0}),b=U(i),h=w(i,"BUTTON",{class:!0});var K=k(h);S=q(K,"Sign In"),K.forEach(y),N=U(i),m=w(i,"BUTTON",{class:!0});var O=k(m);r=q(O,"Create Account"),O.forEach(y),d=U(i),t=w(i,"P",{class:!0});var D=k(t);P=q(D,l[2]),D.forEach(y),i.forEach(y),v.forEach(y),this.h()},h(){c(s,"type","text"),c(s,"placeholder","Username"),c(s,"class","svelte-877in5"),c(a,"type","password"),c(a,"placeholder","Password"),c(a,"class","svelte-877in5"),c(h,"class","svelte-877in5"),c(m,"class","create-account-btn svelte-877in5"),c(t,"class","error-message svelte-877in5"),c(e,"class","container svelte-877in5"),c(u,"class","svelte-877in5")},m(o,v){j(o,u,v),n(u,e),n(e,f),n(f,p),n(e,_),n(e,s),A(s,l[0]),n(e,E),n(e,a),A(a,l[1]),n(e,b),n(e,h),n(h,S),n(e,N),n(e,m),n(m,r),n(e,d),n(e,t),n(t,P),M||(B=[I(s,"input",l[7]),I(s,"keydown",l[4]),I(a,"input",l[8]),I(a,"keydown",l[4]),I(h,"click",l[9]),I(m,"click",l[10])],M=!0)},p(o,[v]){v&1&&s.value!==o[0]&&A(s,o[0]),v&2&&a.value!==o[1]&&A(a,o[1]),v&4&&z(P,o[2])},i:F,o:F,d(o){o&&y(u),M=!1,Q(B)}}}function te(l,u,e){let f,p="",_="";const s=X("");R(l,s,r=>e(2,f=r));function E(r){r.key==="Enter"&&a(p,_)}async function a(r,d){try{const t=await G(null,"signin",r,d);if(t&&t.access_token)Y.set(t.access_token),Z.set(t.settings),$.set(t.setups),x.set(t.watchlists),await W("/chart");else throw new Error("Invalid Credentials")}catch(t){s.set(t),d=""}}async function b(r,d){try{await G(null,"signup",r,d),await a(r,d)}catch(t){s.set(t.message||"Failed to create account")}}function h(){p=this.value,e(0,p)}function S(){_=this.value,e(1,_)}return[p,_,f,s,E,a,b,h,S,()=>a(p,_),()=>b(p,_)]}class re extends J{constructor(u){super(),L(this,u,te,ee,V,{})}}export{re as component};
