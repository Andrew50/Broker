import{s as me,I as ve,J as be,f as y,a as H,l as F,g as T,h as A,A as q,c as V,d as v,m as R,j as k,k as z,E as Z,i as M,x as _,C as j,B as P,K as ge,n as X,D as ae,e as ee,F as oe,G as ke,y as ye,p as Te}from"../chunks/scheduler.VY-UclLW.js";import{S as we,i as Ce,b as ue,d as ce,m as fe,a as de,t as he,e as pe}from"../chunks/index.QBX9jeLG.js";import{C as Ee,g as De,a as Se,B as Le,o as Ie,b as Me,e as te,c as He}from"../chunks/candlestick-series.ckzwoZw9.js";import{w as x}from"../chunks/index.kYg0fxAy.js";const{window:$}=Me;function le(l,e,t){const s=l.slice();return s[32]=e[t],s}function se(l){let e,t,s,o,p,a,c,u,n,r,d,S='<input type="submit" value="FETCH"/>',E,w,O,B,h=l[0].length>0&&ne(l);return{c(){e=y("form"),t=y("div"),s=y("input"),o=H(),p=y("div"),a=y("input"),c=H(),u=y("div"),n=y("input"),r=H(),d=y("div"),d.innerHTML=S,E=H(),h&&h.c(),w=ee(),this.h()},l(f){e=T(f,"FORM",{});var b=A(e);t=T(b,"DIV",{class:!0});var C=A(t);s=T(C,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0}),C.forEach(v),o=V(b),p=T(b,"DIV",{class:!0});var D=A(p);a=T(D,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0}),D.forEach(v),c=V(b),u=T(b,"DIV",{class:!0});var U=A(u);n=T(U,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0}),U.forEach(v),r=V(b),d=T(b,"DIV",{class:!0,"data-svelte-h":!0}),q(d)!=="svelte-1j0xuw6"&&(d.innerHTML=S),b.forEach(v),E=V(f),h&&h.l(f),w=ee(),this.h()},h(){k(s,"type","text"),k(s,"id","ticker"),k(s,"name","ticker"),k(s,"placeholder","Enter Ticker"),s.required=!0,k(t,"class","form-group"),k(a,"type","text"),k(a,"id","tf"),k(a,"name","tf"),k(a,"placeholder","Enter TF"),a.required=!0,k(p,"class","form-group"),k(n,"type","text"),k(n,"id","dt"),k(n,"name","dt"),k(n,"placeholder","Enter Date Time"),k(u,"class","form-group"),k(d,"class","form-group")},m(f,b){M(f,e,b),_(e,t),_(t,s),j(s,l[12]),_(e,o),_(e,p),_(p,a),j(a,l[13]),_(e,c),_(e,u),_(u,n),j(n,l[14]),_(e,r),_(e,d),M(f,E,b),h&&h.m(f,b),M(f,w,b),O||(B=[P(s,"input",l[22]),P(a,"input",l[23]),P(n,"input",l[24]),P(e,"submit",oe(l[25]))],O=!0)},p(f,b){b[0]&4096&&s.value!==f[12]&&j(s,f[12]),b[0]&8192&&a.value!==f[13]&&j(a,f[13]),b[0]&16384&&n.value!==f[14]&&j(n,f[14]),f[0].length>0?h?h.p(f,b):(h=ne(f),h.c(),h.m(w.parentNode,w)):h&&(h.d(1),h=null)},d(f){f&&(v(e),v(E),v(w)),h&&h.d(f),O=!1,ae(B)}}}function ne(l){let e,t,s="<tr><th>Ticker Symbol</th> <th>Timestamp</th> <th>Value</th></tr>",o,p,a=te(l[0]),c=[];for(let u=0;u<a.length;u+=1)c[u]=re(le(l,a,u));return{c(){e=y("table"),t=y("thead"),t.innerHTML=s,o=H(),p=y("tbody");for(let u=0;u<c.length;u+=1)c[u].c();this.h()},l(u){e=T(u,"TABLE",{class:!0});var n=A(e);t=T(n,"THEAD",{"data-svelte-h":!0}),q(t)!=="svelte-1veew9d"&&(t.innerHTML=s),o=V(n),p=T(n,"TBODY",{});var r=A(p);for(let d=0;d<c.length;d+=1)c[d].l(r);r.forEach(v),n.forEach(v),this.h()},h(){k(e,"class","svelte-smk323")},m(u,n){M(u,e,n),_(e,t),_(e,o),_(e,p);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(p,null)},p(u,n){if(n[0]&9){a=te(u[0]);let r;for(r=0;r<a.length;r+=1){const d=le(u,a,r);c[r]?c[r].p(d,n):(c[r]=re(d),c[r].c(),c[r].m(p,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=a.length}},d(u){u&&v(e),ke(c,u)}}}function re(l){let e,t,s=l[32][0]+"",o,p,a,c=l[32][1]+"",u,n,r,d=l[32][2]+"",S,E,w,O;function B(){return l[26](l[32])}return{c(){e=y("tr"),t=y("td"),o=F(s),p=H(),a=y("td"),u=F(c),n=H(),r=y("td"),S=F(d),E=H()},l(h){e=T(h,"TR",{});var f=A(e);t=T(f,"TD",{});var b=A(t);o=R(b,s),b.forEach(v),p=V(f),a=T(f,"TD",{});var C=A(a);u=R(C,c),C.forEach(v),n=V(f),r=T(f,"TD",{});var D=A(r);S=R(D,d),D.forEach(v),E=V(f),f.forEach(v)},m(h,f){M(h,e,f),_(e,t),_(t,o),_(e,p),_(e,a),_(a,u),_(e,n),_(e,r),_(r,S),_(e,E),w||(O=P(e,"click",B),w=!0)},p(h,f){l=h,f[0]&1&&s!==(s=l[32][0]+"")&&X(o,s),f[0]&1&&c!==(c=l[32][1]+"")&&X(u,c),f[0]&1&&d!==(d=l[32][2]+"")&&X(S,d)},d(h){h&&v(e),w=!1,O()}}}function ie(l){let e,t='<div class="form-group"><input type="submit" value="Screen"/></div>',s,o,p,a,c,u;return{c(){e=y("form"),e.innerHTML=t,s=H(),o=y("div"),p=F("this is the letter "),a=F(l[18])},l(n){e=T(n,"FORM",{"data-svelte-h":!0}),q(e)!=="svelte-1le10qq"&&(e.innerHTML=t),s=V(n),o=T(n,"DIV",{});var r=A(o);p=R(r,"this is the letter "),a=R(r,l[18]),r.forEach(v)},m(n,r){M(n,e,r),M(n,s,r),M(n,o,r),_(o,p),_(o,a),c||(u=P(e,"submit",oe(l[27])),c=!0)},p:ye,d(n){n&&(v(e),v(s),v(o)),c=!1,u()}}}function Ve(l){let e,t;return e=new He({props:{data:l[1],reactive:!0,upColor:"rgba(0,255, 0, 1)",downColor:"rgba(255, 0, 0, 1)",borderDownColor:"rgba(255, 0, 0, 1)",borderUpColor:"rgba(0,255, 0, 1)",wickDownColor:"rgba(255, 0, 0, 1)",wickUpColor:"rgba(0,255, 0, 1)"}}),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,o){fe(e,s,o),t=!0},p(s,o){const p={};o[0]&2&&(p.data=s[1]),e.$set(p)},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){he(e.$$.fragment,s),t=!1},d(s){pe(e,s)}}}function Oe(l){let e,t,s,o="<div>M</div> <div>A</div> <div>T</div> <div>C</div> <div>H</div>",p,a,c="<div>S</div> <div>C</div> <div>R</div> <div>E</div> <div>E</div> <div>N</div> <div>E</div> <div>R</div>",u,n,r,d,S,E,w,O,B,h,f="test",b,C,D,U,G;ve(l[21]);let L=l[6]&&se(l),I=l[7]&&ie(l);const J=[{width:l[4]-300},{height:l[5]-40},l[19]];let W={$$slots:{default:[Ve]},$$scope:{ctx:l}};for(let i=0;i<J.length;i+=1)W=be(W,J[i]);return E=new Ee({props:W}),{c(){e=y("div"),t=y("div"),s=y("button"),s.innerHTML=o,p=H(),a=y("button"),a.innerHTML=c,u=H(),n=y("div"),L&&L.c(),r=H(),d=y("div"),I&&I.c(),S=H(),ue(E.$$.fragment),w=H(),O=F(l[10]),B=H(),h=y("a"),h.textContent=f,b=H(),C=y("input"),this.h()},l(i){e=T(i,"DIV",{class:!0});var m=A(e);t=T(m,"DIV",{class:!0});var N=A(t);s=T(N,"BUTTON",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-182r6iu"&&(s.innerHTML=o),p=V(N),a=T(N,"BUTTON",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-17xqvtb"&&(a.innerHTML=c),u=V(N),n=T(N,"DIV",{class:!0,style:!0});var K=A(n);L&&L.l(K),K.forEach(v),r=V(N),d=T(N,"DIV",{class:!0,style:!0});var Y=A(d);I&&I.l(Y),Y.forEach(v),N.forEach(v),m.forEach(v),S=V(i),ce(E.$$.fragment,i),w=V(i),O=R(i,l[10]),B=V(i),h=T(i,"A",{href:!0,"data-svelte-h":!0}),q(h)!=="svelte-1j83awr"&&(h.textContent=f),b=V(i),C=T(i,"INPUT",{class:!0,style:!0}),this.h()},h(){k(s,"class","match-button svelte-smk323"),k(a,"class","screener-button svelte-smk323"),k(n,"class","popout-menu svelte-smk323"),z(n,"min-height",l[5]+"px"),Z(n,"visible",l[6]),k(d,"class","popout-menu svelte-smk323"),z(d,"min-height",l[5]+"px"),Z(d,"visible",l[7]),k(t,"class","button-container"),k(e,"class","container svelte-smk323"),k(h,"href","/test"),k(C,"class","input-overlay svelte-smk323"),z(C,"display",l[11])},m(i,m){M(i,e,m),_(e,t),_(t,s),_(t,p),_(t,a),_(t,u),_(t,n),L&&L.m(n,null),_(t,r),_(t,d),I&&I.m(d,null),M(i,S,m),fe(E,i,m),M(i,w,m),M(i,O,m),M(i,B,m),M(i,h,m),M(i,b,m),M(i,C,m),l[28](C),j(C,l[9]),D=!0,U||(G=[P($,"keydown",l[20]),P($,"resize",l[21]),P(s,"click",l[16]),P(a,"click",l[17]),P(C,"input",l[29]),ge(Ae.call(null,C))],U=!0)},p(i,m){i[6]?L?L.p(i,m):(L=se(i),L.c(),L.m(n,null)):L&&(L.d(1),L=null),(!D||m[0]&32)&&z(n,"min-height",i[5]+"px"),(!D||m[0]&64)&&Z(n,"visible",i[6]),i[7]?I?I.p(i,m):(I=ie(i),I.c(),I.m(d,null)):I&&(I.d(1),I=null),(!D||m[0]&32)&&z(d,"min-height",i[5]+"px"),(!D||m[0]&128)&&Z(d,"visible",i[7]);const N=m[0]&524336?De(J,[m[0]&16&&{width:i[4]-300},m[0]&32&&{height:i[5]-40},m[0]&524288&&Se(i[19])]):{};m[0]&2|m[1]&16&&(N.$$scope={dirty:m,ctx:i}),E.$set(N),(!D||m[0]&1024)&&X(O,i[10]),(!D||m[0]&2048)&&z(C,"display",i[11]),m[0]&512&&C.value!==i[9]&&j(C,i[9])},i(i){D||(de(E.$$.fragment,i),D=!0)},o(i){he(E.$$.fragment,i),D=!1},d(i){i&&(v(e),v(S),v(w),v(O),v(B),v(h),v(b),v(C)),L&&L.d(),I&&I.d(),pe(E,i),l[28](null),U=!1,ae(G)}}}function Ae(l){const e=document.createElement("div");document.body.appendChild(e);function t(){const o=window.getComputedStyle(l);e.innerHTML=l.value,e.style.fontSize=o.fontSize,e.style.fontFamily=o.fontFamily,e.style.paddingLeft=o.paddingLeft,e.style.paddingRight=o.paddingRight,e.style.boxSizing="border-box",e.style.border=o.border,e.style.width="max-content",e.style.position="absolute",e.style.top="0",e.style.left="-9999px",e.style.overflow="hidden",e.style.visibility="hidden",e.style.whiteSpace="pre",e.style.height="0",l.style.width=`${e.offsetWidth*1.5}px`}t();const s=new MutationObserver(t);return s.observe(l,{attributes:!0,childList:!0,subtree:!0}),l.addEventListener("input",t),{destroy(){s.disconnect(l),l.removeEventListener("input",t)}}}async function Q(l,e=!1,t=!1){if(!t){event.preventDefault();const o=new FormData(event.target);t=Array.from(o.values()).join("_")}e&&(t=`${e}_${t}`);const s=`http://localhost:5057/fetch/${t}`;try{console.log("request sent",s);const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("POST response not ok");const a=(await o.json()).task_id,u=setInterval(async()=>{const n=await fetch(`http://localhost:5057/poll/${a}`);if(!n.ok)throw new Error("GET response not ok");const r=await n.json(),d=r.status;r.status==="done"?(clearInterval(u),console.log(r.result),l.set(r.result)):d==="failed"&&(clearInterval(u),l.set("failed"))},200)}catch{l.set(null)}}function Be(l,e,t){let{match_data_store:s=x([])}=e,{match_data:o=[]}=e;s.subscribe(g=>{try{t(0,o=JSON.parse(g))}catch{t(0,o=g)}});let p=x();p.subscribe(g=>{});let{chart_data_store:a=x([{time:"2018-10-19",open:180.34,high:180.99,low:178.57,close:179.85}])}=e,{chart_data:c}=e;a.subscribe(g=>{console.log(g);try{t(1,c=JSON.parse(g))}catch{t(1,c=g)}});let u,n,r=!1,d=!1,S,E=!1,w="",O,B="none";function h(){t(6,r=!r),t(7,d=!1)}function f(){t(7,d=!d),t(6,r=!1)}let b="AAPL",C="1d",D="2023-10-03",U;const G={layout:{background:{type:Le.Solid,color:"#000000"},textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.5)"},horzLines:{color:"rgba(197, 203, 206, 0.5)"}},crosshair:{mode:Ie.Magnet},rightPriceScale:{borderColor:"rgba(197, 203, 206, 0.8)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.8)"}};function L(g){/^[a-zA-Z]$/.test(g.key.toLowerCase())&&E==!1&&(t(11,B="block"),E=!0,t(9,w+=g.key.toUpperCase()),g.preventDefault(),S.focus()),g.key=="Enter"&&(t(10,O=w),Q(a,"Chart-get",w),t(11,B="none"),t(9,w=""),E=!1),S.focus()}function I(){t(4,u=$.innerWidth),t(5,n=$.innerHeight)}function J(){b=this.value,t(12,b)}function W(){C=this.value,t(13,C)}function i(){D=this.value,t(14,D)}const m=()=>Q(s,"Match-get"),N=g=>Q(a,"Chart-get",`${g[0]}_1d_${g[1]}`),K=()=>Q(p,"Screener-get");function Y(g){Te[g?"unshift":"push"](()=>{S=g,t(8,S)})}function _e(){w=this.value,t(9,w)}return l.$$set=g=>{"match_data_store"in g&&t(2,s=g.match_data_store),"match_data"in g&&t(0,o=g.match_data),"chart_data_store"in g&&t(3,a=g.chart_data_store),"chart_data"in g&&t(1,c=g.chart_data)},[o,c,s,a,u,n,r,d,S,w,O,B,b,C,D,p,h,f,U,G,L,I,J,W,i,m,N,K,Y,_e]}class ze extends we{constructor(e){super(),Ce(this,e,Be,Oe,me,{match_data_store:2,match_data:0,chart_data_store:3,chart_data:1},null,[-1,-1])}}export{ze as component};
