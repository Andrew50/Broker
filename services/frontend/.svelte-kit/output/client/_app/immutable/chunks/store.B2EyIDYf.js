import{H as f}from"./scheduler.VY-UclLW.js";import{w as a}from"./index.kYg0fxAy.js";let S=a([]),m=a([]),O=a([[],[],[]]),y=a(null),T=a([]),q=a({}),E=a({});function d(){const t=f(y);return t?{Authorization:`Bearer ${t}`}:{}}async function j(t,o,...r){const n="http://localhost:5057/public",c={function:o,arguments:r};console.log("Request sent to:",n,"func:",o,"args:",r);try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!e.ok)throw new Error("POST response not ok");let s=await e.json();try{s=JSON.parse(s)}catch{}if(t==null)return s;t.set(s)}catch(e){console.error("Error during backend request:",e),t.set(null)}}async function _(t,o,...r){const n="http://localhost:5057/data",c={function:o,arguments:r};console.log("Request sent to:",n,"func:",o,"args:",r);try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify(c)});if(!e.ok)throw new Error("POST response not ok");let s=await e.json();try{s=JSON.parse(s)}catch{}if(t==null)return s;t.set(s)}catch(e){console.error("Error during backend request:",e),t.set(null)}}async function J(t,o,...r){const n="http://localhost:5057/backend",c={function:o,arguments:r};console.log("Request sent to:",n,"func:",o,"args:",r);try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",...d()},body:JSON.stringify(c)});if(!e.ok)throw new Error("POST response not ok");const l=(await e.json()).task_id,p=setInterval(async()=>{const h=await fetch(`http://localhost:5057/poll/${l}`);if(!h.ok)throw new Error("GET response not ok");const u=await h.json();if(u.status==="done"){clearInterval(p);let i=u.result;try{i=JSON.parse(i)}catch{}t.set(i)}else u.status==="failed"&&(clearInterval(p),t.set("failed"))},200)}catch(e){console.error("Error during backend request:",e),t.set(null)}}export{y as a,T as b,J as c,m as d,S as e,_ as f,O as m,j as p,E as s,q as w};
